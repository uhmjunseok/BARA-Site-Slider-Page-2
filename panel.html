  let currentVideoId = null;

  function apply(videoId){
    if (!videoId || typeof videoId !== 'string') return;

    const d = DATA[videoId];

    // ✅ DATA에 없는 값이면 default로 되돌리지 말고 "그냥 무시"
    if (!d) return;

    // ✅ 같은 값이면 재적용하지 않음
    if (videoId === currentVideoId) return;
    currentVideoId = videoId;

    titleEl.textContent = d.title;
    subEl.textContent   = d.sub;
    descEl.textContent  = d.desc;
    softRelayout();
  }

  window.addEventListener('message', function(ev){
    const data = ev.data;
    if (!data || data.type !== 'BARA_VIDEO_SELECT') return;

    // (선택) top에서 온 것만 받기
    if (ev.source !== window.top) return;

    apply(data.videoId);
  }, true);
